(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"20c0":function(t,e,s){},"23ff":function(t,e,s){"use strict";s("20c0")},4897:function(t,e,s){"use strict"},a00b:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{staticClass:"constrain-more q-pa-none"},[t._v("\n  "+t._s(t.postpopup)+"\n  "),s("q-item",{staticClass:"q-px-xs q-pt-sm q-ma-none"},[s("q-item-section",{staticClass:"q-ml-xs",attrs:{avatar:""}},[s("q-avatar",{staticClass:"q-mx-none shadow-1",attrs:{size:"45px"}},[s("img",{staticStyle:{border:"2px solid white","border-radius":"50%","object-fit":"cover"},attrs:{src:t.userDetails.photoURL}}),t.post.name===t.userDetails.name?s("q-badge",{staticStyle:{"border-radius":"100%",border:"2px solid white",padding:"6.5px 6.5px",margin:"1px 1px"},attrs:{floating:"",round:"",color:"light-green-14"}}):t._e()],1)],1),s("q-item-section",[s("q-item-label",{staticClass:"text-weight-medium ",staticStyle:{"margin-left":"-7px","font-size":"14.5px","margin-top":"1px"},attrs:{"v-model":t.post.name=t.userDetails.name}},[t._v(t._s(t.post.name))]),s("q-item-label",{staticClass:"text-caption ",staticStyle:{"margin-left":"-7px","font-size":"11px","margin-top":"2px"},attrs:{caption:""}},[s("q-btn",{staticClass:"q-pa-none q-ma-none",staticStyle:{height:"21px"},attrs:{bordered:"",dense:"",outline:"",color:"grey-7"},on:{click:function(e){return t.open("bottom")}}},[s("q-badge",{staticClass:"q-pa-none q-ma-none text-weight-regular",staticStyle:{"font-size":"11px","padding-bottom":"0px","margin-bottom":"6px"},attrs:{dense:"",flat:"","text-color":"grey-7",color:"transparent"}},[s("q-icon",{staticClass:"q-my-none q-pb-xs q-mr-xs",attrs:{name:"public",color:"grey-7",size:"13px"}}),t._v("Share All"),s("q-icon",{staticClass:"q-my-none q-pb-xs",attrs:{name:"expand_more",color:"grey-7",size:"13px"}})],1)],1),s("q-btn",{staticClass:"q-pa-none q-mx-xs",staticStyle:{height:"21px"},attrs:{bordered:"",dense:"",outline:"",color:"grey-7"},on:{click:function(e){return t.open("bottom")}}},[s("q-badge",{staticClass:"q-pa-none q-ma-none text-weight-regular",staticStyle:{"font-size":"11px","padding-bottom":"0px","margin-bottom":"6px"},attrs:{dense:"",flat:"","text-color":"grey-7",color:"transparent"}},[s("q-icon",{staticClass:"q-my-none q-pb-xs q-mr-xs",attrs:{name:"add",color:"grey-7",size:"13px"}}),t._v("Album"),s("q-icon",{staticClass:"q-my-none q-pb-xs",attrs:{name:"expand_more",color:"grey-7",size:"13px"}})],1)],1)],1)],1),s("q-space"),s("q-btn",{staticStyle:{"font-size":"15px"},attrs:{flat:"",round:"",icon:"more_horiz"},on:{click:function(e){return t.open("bottom")}}})],1),s("div",{staticClass:"q-px-md q-mt-none q-py-none",staticStyle:{width:"100vw"}},[s("q-input",{staticStyle:{"font-size":"16px"},attrs:{borderless:"","bg-color":"white",standout:"bg-white text-grey-8 ",dense:t.dense,"label-slot":"",autogrow:""},scopedSlots:t._u([{key:"label",fn:function(){return[s("strong",{staticClass:"text-grey-7 text-subtitle1 text-weight-regular"},[t._v("What are you thinking?")])]},proxy:!0}]),model:{value:t.post.caption,callback:function(e){t.$set(t.post,"caption",e)},expression:"post.caption"}})],1),s("q-input",{ref:"myFileInput",staticClass:"q-py-xs q-px-md",staticStyle:{display:"none"},attrs:{type:"file"},on:{input:t.captureImageFallback},model:{value:t.media,callback:function(e){t.media=e},expression:"media"}}),s("div",{staticClass:"camera-frame q-pa-none"},[t.media?s("q-btn",{staticClass:"absolute",staticStyle:{right:"7px","margin-top":"10px","font-size":"13px",padding:"1px","background-color":"#000000a8"},attrs:{flat:"",icon:"close","text-color":"white",padding:"none"},on:{click:t.getFileDel}}):t._e(),s("q-media-player",{directives:[{name:"show",rawName:"v-show",value:t.videofileview,expression:"videofileview"}],ref:"mediaplayer",attrs:{type:"video",autoplay:"",source:t.itemUrl}}),s("video",{directives:[{name:"show",rawName:"v-show",value:t.videostream,expression:"videostream"}],ref:"video",staticClass:"full-width",attrs:{autoplay:""}}),s("canvas",{directives:[{name:"show",rawName:"v-show",value:t.imageCaptured,expression:"imageCaptured"}],ref:"canvas",staticClass:"full-width",attrs:{height:"240"}})],1),s("div",{staticClass:"text-center q-pa-md"},[t.hasCameraSupport?s("q-btn",{directives:[{name:"show",rawName:"v-show",value:t.videostream,expression:"videostream"}],attrs:{disable:!t.videostream,size:"lg",round:"",color:"primary",icon:"mail"},on:{click:t.captureImage}}):t._e(),s("div",{staticClass:"row justify-center q-ma-md"},[s("q-input",{staticClass:"col-4 col-sm-4",attrs:{label:"Tags",dense:""},model:{value:t.post.hashtags,callback:function(e){t.$set(t.post,"hashtags",e)},expression:"post.hashtags"}}),s("q-input",{staticClass:"col-4 col-sm-4",attrs:{label:"Tags",dense:""},model:{value:t.post.hashtagsa,callback:function(e){t.$set(t.post,"hashtagsa",e)},expression:"post.hashtagsa"}}),s("q-input",{staticClass:"col-4 col-sm-4",attrs:{label:"Tags",dense:""},model:{value:t.post.hashtagsb,callback:function(e){t.$set(t.post,"hashtagsb",e)},expression:"post.hashtagsb"}})],1),s("div",{staticClass:"row justify-center q-ma-md"},[s("q-input",{staticClass:"col col-sm-6",attrs:{loading:t.locationLoading,label:"Location",dense:""},scopedSlots:t._u([{key:"append",fn:function(){return[!t.locationLoading&&t.locationSupported?s("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"add"},on:{click:t.getLocation}}):t._e()]},proxy:!0}]),model:{value:t.post.location,callback:function(e){t.$set(t.post,"location",e)},expression:"post.location"}})],1)],1),s("q-dialog",{attrs:{seamless:"",position:"top"},model:{value:t.imgpopup,callback:function(e){t.imgpopup=e},expression:"imgpopup"}},[s("q-card",{staticClass:"row q-mt-none  ",staticStyle:{"max-width":"100%"},attrs:{flat:""}},[t.$route.fullPath.includes("/camera")?s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"},{name:"go-back",rawName:"v-go-back.single",modifiers:{single:!0}}],staticClass:"col q-px-xs q-ma-sm justify-start ",attrs:{icon:"close",size:"15px",flat:"",dense:""}}):t._e(),s("div",{staticClass:"q-py-sm col-8 text-center text-subtitle1 text-weight-medium",staticStyle:{"font-size":"18px",padding:"11px"}},[t._v("Create a Post")]),s("q-btn",{staticClass:"col q-px-sm q-py-none q-ma-sm justify-end",attrs:{disable:!t.post.photo||!t.post.videomp,unelevated:"",bordered:"",dense:"",color:"primary",label:"Done"},on:{click:function(e){return t.addPost()}}})],1)],1),s("q-dialog",{attrs:{position:t.position},model:{value:t.seamless,callback:function(e){t.seamless=e},expression:"seamless"}},[s("q-card",{staticStyle:{width:"100vw",height:"90vh"}},[s("q-linear-progress",{attrs:{value:.6,color:"pink"}}),s("q-item-label",{attrs:{header:""}},[t._v("User Controls")]),s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[s("q-item-section",{attrs:{avatar:""}},[s("q-avatar",{attrs:{icon:"bluetooth","font-size":"30px",size:"lg"}})],1),s("q-item-section",{staticClass:"q-mx-none q-px-none"},[s("q-item-label",[t._v("Content filtering")]),s("q-item-label",{attrs:{caption:""}},[t._v("\n          Set the content filtering level to restrict\n          apps that can be downloaded\n        ")])],1)],1),s("q-card-section",{staticClass:"row items-center no-wrap"},[s("div",[s("div",{staticClass:"text-weight-bold"},[t._v("The Walker")]),s("div",{staticClass:"text-grey"},[t._v("Fitz & The Tantrums")])]),s("q-space"),s("q-btn",{attrs:{flat:"",round:"",icon:"play_arrow"}}),s("q-btn",{attrs:{flat:"",round:"",icon:"pause"}}),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",icon:"close"}})],1)],1)],1),s("q-dialog",{attrs:{seamless:"",position:t.position},model:{value:t.imgpopup,callback:function(e){t.imgpopup=e},expression:"imgpopup"}},[s("q-card",{staticStyle:{width:"100vw",height:"11.5vh"}},[s("q-linear-progress",{attrs:{value:1,color:"pink"}}),s("q-card-section",{staticClass:"row items-center no-wrap"},[s("div",[s("div",{staticClass:"text-weight-bold"},[t._v("Influencer")]),s("div",{staticClass:"text-grey"},[t._v("Account level")])]),s("q-space"),s("q-btn",{staticClass:"q-mx-sm bg-grey-3",attrs:{flat:"",outline:"",round:"",icon:"perm_media",color:"grey-7",size:"16px"},on:{click:t.getFile}}),s("q-btn",{staticClass:"q-mx-sm bg-grey-3",attrs:{flat:"",outline:"",round:"",icon:"camera_enhance",color:"grey-7",size:"16px",disable:!t.hasCameraSupport},on:{click:t.getStaream}})],1)],1)],1)],1)},i=[],o=s("ded3"),n=s.n(o),r=(s("caad"),s("2532"),s("d3b7"),s("e6cf"),s("159b"),s("ac1f"),s("1276"),s("c19f"),s("ace4"),s("e260"),s("5cc6"),s("9a8c"),s("a975"),s("735e"),s("c1ac"),s("d139"),s("3a7b"),s("d5d6"),s("82f8"),s("e91f"),s("60bd"),s("5f96"),s("3280"),s("3fcc"),s("ca91"),s("25a1"),s("cd26"),s("3c5d"),s("2954"),s("649e"),s("219c"),s("170b"),s("b39a"),s("72f7"),s("99af"),s("b0c0"),s("b64b"),s("1732")),l=s("2f62");s("afb9"),s("4897");s("121f");var c={name:"camera",data:function(){return{post:{id:Object(r["a"])(),name:{},userIds:null,hashtags:"",hashtagsa:"",hashtagsb:"",caption:"",location:"",photo:null,filetype:"",videomp:null,commentCount:0,likesCount:0,date:Date.now()},postDetailsLike:{LikeId:"",LikeName:"",LikeUserId:"",Likeds:!1,LikeCounts:0,userphoto:"",date:Date.now()},imageCaptured:!1,videofileview:!1,videostream:!1,imageUpload:[],hasCameraSupport:!1,locationLoading:!1,media:null,itemUrl:null,itemfile:!1,seamless:!1,imgpopup:!0,position:"bottom",text:"",dense:!1}},components:{},computed:n()(n()(n()({},Object(l["c"])("store",["users"])),Object(l["e"])("store",["userDetails"])),{},{locationSupported:function(){return"geolocation"in navigator},postpopup:function(){console.log("err: ",this.imgpopup),this.$route.fullPath.includes("/camera")?(this.imgpopup=!0,console.log("aaaa: ",this.imgpopup)):(this.imgpopup=!1,console.log("bbbb: ",this.imgpopup))}}),watch:{media:function(t){t&&t.length>0&&this.loadFileBlob(t)},streamCall:function(){return void 0!==navigator.mediaDevices.getUserMedia?(this.hasCameraSupport=!0,new Promise((function(t,e){getUserMedia.call(navigator,constraints,t,e),this.hasCameraSupport=!0}))):(this.hasCameraSupport=!1,this.videostream=!1,new Promise((function(t,e){getUserMedia.call(navigator,constraints,t,e)})))}},methods:n()(n()({},Object(l["b"])("store",["firebaseSendPostInfo","firebaseLikePut"])),{},{getFile:function(){this.$refs.myFileInput.$el.click(),!0===this.videostream&&this.disableCamera(),this.videostream=!1,this.hasCameraSupport=!0},getFileDel:function(){this.media=null,this.post.photo=null,this.post.videomp=null,this.imageCaptured=!1,this.videofileview=!1,this.post.hashtags="",this.post.hashtagsa="",this.post.hashtagsb="",this.post.caption="",this.post.location=""},getStaream:function(){this.media=null,this.imageCaptured=!1,this.videostream=!0,this.hasCameraSupport=!0,this.initCamera()},open:function(t){this.seamless=!1,this.imgpopup=!0,this.position="bottom"},onRejected:function(t){this.$q.notify({type:"negative",message:"".concat(t.length," file(s) did not pass validation constraints")})},loadFileBlob:function(t){this.$refs.mediaplayer.loadFileBlob(t)},initCamera:function(){var t=this;navigator.mediaDevices.getUserMedia({video:!0}).then((function(e){t.$refs.video.srcObject=e})).catch((function(e){t.hasCameraSupport=!1,!0===t.videostream&&t.disableCamera(),t.videostream=!1}))},captureImage:function(){var t=this.$refs.video,e=this.$refs.canvas;e.width=t.getBoundingClientRect().width,e.height=t.getBoundingClientRect().height;var s=e.getContext("2d");s.drawImage(t,0,0,e.width,e.height),this.imageCaptured=!0,this.videofileview=!1,this.videostream=!1,this.hasCameraSupport=!0,this.post.photo=this.dataURItoBlob(e.toDataURL()),this.disableCamera()},captureImageFallback:function(t){var e=this;this.post.photo=t[0],this.post.videomp=t[0],this.post.filetype=t[0].type,this.post.userIds=this.userDetails.userId;var s=this.$refs.canvas,a=s.getContext("2d"),i=new FileReader;"image/jpeg"===t[0].type?(i.onload=function(t){var i=new Image;i.onload=function(){s.width=i.width,s.height=i.height,a.drawImage(i,0,0),e.imageCaptured=!0,e.videofileview=!1,!0===e.videostream&&e.disableCamera(),e.videostream=!1},i.src=t.target.result},i.readAsDataURL(t[0])):"video/mp4"===t[0].type&&(i.readAsDataURL(t[0]),this.imageCaptured=!1,this.videofileview=!0,!0===this.videostream&&this.disableCamera(),this.videostream=!1)},disableCamera:function(){this.$refs.video.srcObject.getVideoTracks().forEach((function(t){t.stop()}))},dataURItoBlob:function(t){for(var e=atob(t.split(",")[1]),s=t.split(",")[0].split(":")[1].split(";")[0],a=new ArrayBuffer(e.length),i=new Uint8Array(a),o=0;o<e.length;o++)i[o]=e.charCodeAt(o);var n=new Blob([a],{type:s});return n},getLocation:function(){var t=this;this.locationLoading=!0,navigator.geolocation.getCurrentPosition((function(e){t.getCityAndCountry(e)}),(function(e){t.locationError()}),{timeout:7e3})},getCityAndCountry:function(t){var e=this,s="https://geocode.xyz/".concat(t.coords.latitude,",").concat(t.coords.longitude,"?json=1");this.$axios.get(s).then((function(t){e.locationSuccess(t)})).catch((function(t){e.locationError()}))},locationSuccess:function(t){this.post.location=t.data.city,t.data.country&&(this.post.location+=", ".concat(t.data.country)),this.locationLoading=!1},locationError:function(){this.$q.dialog({title:"Error",message:"Could not find your location"}),this.locationLoading=!1},sendPostInfo:function(){console.log("0aaa",this.post.imageUrl),this.firebaseSendPostInfo({id:this.post.id,name:this.post.name,userIds:this.post.userIds,hashtags:this.post.hashtags,hashtagsa:this.post.hashtagsa,hashtagsb:this.post.hashtagsb,caption:this.post.caption,location:this.post.location,photo:this.post.imageUrl,videomp:this.post.imageUrl,filetype:this.post.filetype,commentCount:this.post.commentCount,likesCount:this.post.likesCount,date:this.post.date}),console.log("0aaa",this.post.imageUrl),this.countLikednew()},countLikednew:function(){console.log("1q2w3e4r5t6y7u8i9o",this.post.id),this.postDetailsLike.LikeId=this.post.id,console.log("1q2w3e4r5t6y7u8i9oaaaaa",this.postDetailsLike.LikeId),this.postDetailsLike.LikeName=this.userDetails.name,this.postDetailsLike.LikeCounts=0,this.postDetailsLike.userphoto=this.userDetails.photoURL,this.postDetailsLike.LikeUserId=this.userDetails.userId,this.postDetailsLike.Likeds=!1,this.firebaseLikePut({likesData:{LId:this.postDetailsLike.LikeId,Lname:this.postDetailsLike.LikeName,Liketype:this.postDetailsLike.Likeds,LikeCounts:this.postDetailsLike.LikeCounts,LikeUserId:this.postDetailsLike.LikeUserId,LikeUserPhoto:this.postDetailsLike.userphoto,date:Date.now()},likesDataa:this.postDetailsLike.LikeId,likesUsers:this.postDetailsLike.LikeUserId})},addPost:function(){var t=this;this.$q.loading.show();var e=new FormData;e.append("id",this.post.id),e.append("name",this.post.name),e.append("userIds",this.post.userIds),e.append("hashtags",this.post.hashtags),e.append("hashtagsa",this.post.hashtagsa),e.append("hashtagsb",this.post.hashtagsb),e.append("caption",this.post.caption),e.append("location",this.post.location),e.append("date",this.post.date),e.append("filetype",this.post.filetype),"image/jpeg"===this.post.photo.type&&e.append("file",this.post.photo,this.post.id+".png"),"video/mp4"===this.post.videomp.type&&e.append("file",this.post.videomp,this.post.id+".mp4"),this.$axios.post("".concat("http://localhost:3000","/createPost"),e).then((function(e){t.$q.notify({message:"Post created!",actions:[{label:"Dismiss",color:"white"}]}),t.getPosts(),t.$router.push("/Home"),t.$q.loading.hide()})).catch((function(e){console.log("err: ",e),t.$q.dialog({title:"Error",message:"Sorry, could not create post!"})}))},getPosts:function(){var t=this;this.loadingPosts=!0,this.$axios.get("".concat("http://localhost:3000","/posts")).then((function(e){console.log(e.data),Object.keys(e.data).forEach((function(s){console.log("key is",s),console.log("paramsId",t.post.id),e.data[s].id===t.post.id&&(console.log("0a",e.data[s].id),t.post.imageUrl=e.data[s].imageUrl,console.log("0aa",e.data[s].imageUrl),console.log("0aaa",t.post.imageUrl))})),t.sendPostInfo(),t.loadingPosts=!1})).catch((function(e){t.$q.dialog({title:"Error",message:"Could not find your locationb"}),t.loadingPosts=!1}))}}),mounted:function(){void 0!==navigator.mediaDevices.getUserMedia?this.hasCameraSupport=!0:(this.hasCameraSupport=!1,this.videostream=!1)},beforeDestroy:function(){this.hasCameraSupport&&(!0===this.videostream&&this.disableCamera(),this.videostream=!1)}},p=c,d=(s("23ff"),s("2877")),h=s("9989"),m=s("66e5"),u=s("4074"),g=s("cb32"),f=s("58a81"),v=s("0170"),b=s("9c40"),q=s("0016"),x=s("2c91"),C=s("27f9"),y=s("7d53"),w=s("24e8"),k=s("f09f"),L=s("6b1d"),S=s("a370"),D=s("7f67"),I=s("2eeb"),U=s("714f"),_=s("eebe"),$=s.n(_),P=Object(d["a"])(p,a,i,!1,null,null,null);e["default"]=P.exports;$()(P,"components",{QPage:h["a"],QItem:m["a"],QItemSection:u["a"],QAvatar:g["a"],QBadge:f["a"],QItemLabel:v["a"],QBtn:b["a"],QIcon:q["a"],QSpace:x["a"],QInput:C["a"],QFile:y["a"],QDialog:w["a"],QCard:k["a"],QLinearProgress:L["a"],QCardSection:S["a"]}),$()(P,"directives",{ClosePopup:D["a"],GoBack:I["a"],Ripple:U["a"]})}}]);