(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"08c5":function(t,s,e){},4897:function(t,s,e){"use strict"},"6a4b":function(t,s,e){"use strict";e("08c5")},a0a1:function(t,s,e){"use strict";e.r(s);var o=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("q-page",{staticClass:"constrain-more q-pa-none"},[t._v("\n  "+t._s(t.postpopup)+"\n  "),e("q-item",{staticClass:"q-px-xs q-pt-sm q-ma-none"},[e("q-item-section",{staticClass:"q-ml-xs",attrs:{avatar:""}},[e("q-avatar",{staticClass:"q-mx-none shadow-1",attrs:{size:"45px"}},[e("img",{staticStyle:{border:"2px solid white","border-radius":"50%","object-fit":"cover"},attrs:{src:t.userClubs.companyLogo}}),t.shop.shopName===t.userClubs.companyName?e("q-badge",{staticStyle:{"border-radius":"100%",border:"2px solid white",padding:"6.5px 6.5px",margin:"1px 1px"},attrs:{floating:"",round:"",color:"light-green-14"}}):t._e()],1)],1),e("q-item-section",[e("q-item-label",{staticClass:"text-weight-medium ",staticStyle:{"margin-left":"-7px","font-size":"14.5px","margin-top":"1px"},attrs:{"v-model":t.shop.shopName=t.userClubs.companyName}},[t._v(t._s(t.userClubs.companyName))]),e("q-item-label",{staticClass:"text-caption ",staticStyle:{"margin-left":"-7px","font-size":"11px","margin-top":"2px"},attrs:{caption:""}},[e("q-btn",{staticClass:"q-pa-none q-ma-none",staticStyle:{height:"21px"},attrs:{bordered:"",dense:"",outline:"",color:"grey-7"},on:{click:function(s){return t.open("bottom")}}},[e("q-badge",{staticClass:"q-pa-none q-ma-none text-weight-regular",staticStyle:{"font-size":"11px","padding-bottom":"0px","margin-bottom":"6px"},attrs:{dense:"",flat:"","text-color":"grey-7",color:"transparent"}},[e("q-icon",{staticClass:"q-my-none q-pb-xs q-mr-xs",attrs:{name:"public",color:"grey-7",size:"13px"}}),t._v("Share All"),e("q-icon",{staticClass:"q-my-none q-pb-xs",attrs:{name:"expand_more",color:"grey-7",size:"13px"}})],1)],1),e("q-btn",{staticClass:"q-pa-none q-mx-xs",staticStyle:{height:"21px"},attrs:{bordered:"",dense:"",outline:"",color:"grey-7"},on:{click:function(s){return t.open("bottom")}}},[e("q-badge",{staticClass:"q-pa-none q-ma-none text-weight-regular",staticStyle:{"font-size":"11px","padding-bottom":"0px","margin-bottom":"6px"},attrs:{dense:"",flat:"","text-color":"grey-7",color:"transparent"}},[e("q-icon",{staticClass:"q-my-none q-pb-xs q-mr-xs",attrs:{name:"add",color:"grey-7",size:"13px"}}),t._v("Album"),e("q-icon",{staticClass:"q-my-none q-pb-xs",attrs:{name:"expand_more",color:"grey-7",size:"13px"}})],1)],1)],1)],1),e("q-space"),e("q-btn",{staticStyle:{"font-size":"15px"},attrs:{flat:"",round:"",icon:"more_horiz"},on:{click:function(s){return t.open("bottom")}}})],1),e("div",{staticClass:"q-px-md q-mt-none q-py-none",staticStyle:{width:"100vw"}},[e("q-input",{staticStyle:{"font-size":"16px"},attrs:{borderless:"","bg-color":"white",standout:"bg-white text-grey-8 ",dense:t.dense,"label-slot":""},scopedSlots:t._u([{key:"label",fn:function(){return[e("strong",{staticClass:"text-grey-7 text-subtitle1 text-weight-regular"},[t._v("What are you thinking?")])]},proxy:!0}]),model:{value:t.shop.shopCaption,callback:function(s){t.$set(t.shop,"shopCaption",s)},expression:"shop.shopCaption"}})],1),e("q-input",{ref:"myFileInput",staticClass:"q-py-xs q-px-md",staticStyle:{display:"none"},attrs:{type:"file"},on:{input:t.captureImageFallback},model:{value:t.media,callback:function(s){t.media=s},expression:"media"}}),e("div",{staticClass:"camera-frame q-pa-none"},[t.media?e("q-btn",{staticClass:"absolute",staticStyle:{right:"7px","margin-top":"10px","font-size":"13px",padding:"1px","background-color":"#000000a8"},attrs:{flat:"",icon:"close","text-color":"white",padding:"none"},on:{click:t.getFileDel}}):t._e(),e("q-media-player",{directives:[{name:"show",rawName:"v-show",value:t.videofileview,expression:"videofileview"}],ref:"mediaplayer",attrs:{type:"video",autoplay:"",source:t.itemUrl}}),e("video",{directives:[{name:"show",rawName:"v-show",value:t.videostream,expression:"videostream"}],ref:"video",staticClass:"full-width",attrs:{autoplay:""}}),e("canvas",{directives:[{name:"show",rawName:"v-show",value:t.imageCaptured,expression:"imageCaptured"}],ref:"canvas",staticClass:"full-width",attrs:{height:"240"}})],1),e("div",{staticClass:"text-center q-pa-md"},[t.hasCameraSupport?e("q-btn",{directives:[{name:"show",rawName:"v-show",value:t.videostream,expression:"videostream"}],attrs:{disable:!t.videostream,size:"lg",round:"",color:"primary",icon:"mail"},on:{click:t.captureImage}}):t._e(),e("div",{staticClass:"row justify-center q-ma-md"},[e("q-input",{staticClass:"col-4 col-sm-4",attrs:{label:"Tags",dense:""},model:{value:t.shop.shopHashtags,callback:function(s){t.$set(t.shop,"shopHashtags",s)},expression:"shop.shopHashtags"}}),e("q-input",{staticClass:"col-4 col-sm-4",attrs:{label:"Tags",dense:""},model:{value:t.shop.shopHashtagsa,callback:function(s){t.$set(t.shop,"shopHashtagsa",s)},expression:"shop.shopHashtagsa"}}),e("q-input",{staticClass:"col-4 col-sm-4",attrs:{label:"Tags",dense:""},model:{value:t.shop.shopHashtagsb,callback:function(s){t.$set(t.shop,"shopHashtagsb",s)},expression:"shop.shopHashtagsb"}})],1),e("div",{staticClass:"row justify-center q-ma-md"},[e("q-input",{staticClass:"col col-sm-6",attrs:{loading:t.locationLoading,label:"Location",dense:""},scopedSlots:t._u([{key:"append",fn:function(){return[!t.locationLoading&&t.locationSupported?e("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"add"},on:{click:t.getLocation}}):t._e()]},proxy:!0}]),model:{value:t.shop.shopLocation,callback:function(s){t.$set(t.shop,"shopLocation",s)},expression:"shop.shopLocation"}})],1)],1),e("q-dialog",{attrs:{seamless:"",position:"top"},model:{value:t.imgpopup,callback:function(s){t.imgpopup=s},expression:"imgpopup"}},[e("q-card",{staticClass:"row q-mt-none  ",staticStyle:{"max-width":"100%"},attrs:{flat:""}},[t.$route.fullPath.includes("/ShopPost")?e("q-btn",{directives:[{name:"go-back",rawName:"v-go-back.single",modifiers:{single:!0}}],staticClass:"col q-px-xs q-ma-sm justify-start ",attrs:{icon:"close",size:"15px",flat:"",dense:""}}):t._e(),e("div",{staticClass:"q-py-sm col-8 text-center text-subtitle1 text-weight-medium",staticStyle:{"font-size":"18px",padding:"11px"}},[t._v("Create a Post")]),e("q-btn",{staticClass:"col q-px-sm q-py-none q-ma-sm justify-end",attrs:{disable:!t.shop.shopPhoto||!t.shop.shopVideomp,unelevated:"",bordered:"",dense:"",color:"primary",label:"Done"},on:{click:function(s){return t.addPost()}}})],1)],1),e("q-dialog",{attrs:{position:t.position},model:{value:t.seamless,callback:function(s){t.seamless=s},expression:"seamless"}},[e("q-card",{staticStyle:{width:"100vw",height:"90vh"}},[e("q-linear-progress",{attrs:{value:.6,color:"pink"}}),e("q-item-label",{attrs:{header:""}},[t._v("User Controls")]),e("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[e("q-item-section",{attrs:{avatar:""}},[e("q-avatar",{attrs:{icon:"bluetooth","font-size":"30px",size:"lg"}})],1),e("q-item-section",{staticClass:"q-mx-none q-px-none"},[e("q-item-label",[t._v("Content filtering")]),e("q-item-label",{attrs:{caption:""}},[t._v("\n          Set the content filtering level to restrict\n          apps that can be downloaded\n        ")])],1)],1),e("q-card-section",{staticClass:"row items-center no-wrap"},[e("div",[e("div",{staticClass:"text-weight-bold"},[t._v("The Walker")]),e("div",{staticClass:"text-grey"},[t._v("Fitz & The Tantrums")])]),e("q-space"),e("q-btn",{attrs:{flat:"",round:"",icon:"play_arrow"}}),e("q-btn",{attrs:{flat:"",round:"",icon:"pause"}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",icon:"close"}})],1)],1)],1),e("q-dialog",{attrs:{seamless:"",position:t.position},model:{value:t.imgpopup,callback:function(s){t.imgpopup=s},expression:"imgpopup"}},[e("q-card",{staticStyle:{width:"100vw",height:"11vh"}},[e("q-linear-progress",{attrs:{value:1,color:"pink"}}),e("q-card-section",{staticClass:"row items-center no-wrap"},[e("div",[e("div",{staticClass:"text-weight-bold"},[t._v("Influencer")]),e("div",{staticClass:"text-grey"},[t._v("Account level")])]),e("q-space"),e("q-btn",{staticClass:"q-mx-sm bg-grey-3",attrs:{flat:"",outline:"",round:"",icon:"perm_media",color:"grey-7",size:"16px"},on:{click:t.getFile}}),e("q-btn",{staticClass:"q-mx-sm bg-grey-3",attrs:{flat:"",outline:"",round:"",icon:"camera_enhance",color:"grey-7",size:"16px",disable:!t.hasCameraSupport},on:{click:t.getStaream}})],1)],1)],1)],1)},a=[],i=e("ded3"),n=e.n(i),p=(e("caad"),e("2532"),e("d3b7"),e("e6cf"),e("159b"),e("ac1f"),e("1276"),e("c19f"),e("ace4"),e("e260"),e("5cc6"),e("9a8c"),e("a975"),e("735e"),e("c1ac"),e("d139"),e("3a7b"),e("d5d6"),e("82f8"),e("e91f"),e("60bd"),e("5f96"),e("3280"),e("3fcc"),e("ca91"),e("25a1"),e("cd26"),e("3c5d"),e("2954"),e("649e"),e("219c"),e("170b"),e("b39a"),e("72f7"),e("99af"),e("b64b"),e("1732")),r=e("2f62");e("4897");e("121f");var l={name:"ShopPost",data:function(){return{shop:{id:Object(p["a"])(),shopName:{},shopUserIds:null,shopHashtags:"",shopHashtagsa:"",shopHashtagsb:"",shopCaption:"",shopLocation:"",shopPhoto:null,shopFiletype:"",shopVideomp:null,date:Date.now()},imageCaptured:!1,videofileview:!1,videostream:!1,imageUpload:[],hasCameraSupport:!1,locationLoading:!1,media:null,itemUrl:null,itemfile:!1,seamless:!1,imgpopup:!0,position:"bottom",text:"",dense:!1}},computed:n()(n()(n()({},Object(r["c"])("store",["users","clubs"])),Object(r["e"])("store",["userDetails","userClubs"])),{},{locationSupported:function(){return"geolocation"in navigator},postpopup:function(){console.log("err: ",this.imgpopup),this.$route.fullPath.includes("/ShopPost")?(this.imgpopup=!0,console.log("aaaa: ",this.imgpopup)):(this.imgpopup=!1,console.log("bbbb: ",this.imgpopup))}}),watch:{media:function(t){t&&t.length>0&&this.loadFileBlob(t)},streamCall:function(){return void 0!==navigator.mediaDevices.getUserMedia?(this.hasCameraSupport=!0,new Promise((function(t,s){getUserMedia.call(navigator,constraints,t,s),this.hasCameraSupport=!0}))):(this.hasCameraSupport=!1,this.videostream=!1,new Promise((function(t,s){getUserMedia.call(navigator,constraints,t,s)})))}},methods:n()(n()({},Object(r["b"])("store",["firebaseSendShopInfo"])),{},{getFile:function(){this.$refs.myFileInput.$el.click(),!0===this.videostream&&this.disableCamera(),this.videostream=!1,this.hasCameraSupport=!0},getFileDel:function(){this.media=null,this.shop.shopPhoto=null,this.shop.shopVideomp=null,this.imageCaptured=!1,this.videofileview=!1,this.shop.shopHashtags="",this.shop.shopHashtagsa="",this.shop.shopHashtagsb="",this.shop.shopCaption="",this.shop.shopLocation=""},getStaream:function(){this.media=null,this.imageCaptured=!1,this.videostream=!0,this.hasCameraSupport=!0,this.initCamera()},open:function(t){this.position=t,this.seamless=!0},onRejected:function(t){this.$q.notify({type:"negative",message:"".concat(t.length," file(s) did not pass validation constraints")})},loadFileBlob:function(t){this.$refs.mediaplayer.loadFileBlob(t)},initCamera:function(){var t=this;navigator.mediaDevices.getUserMedia({video:!0}).then((function(s){t.$refs.video.srcObject=s,console.log("errasd")})).catch((function(s){t.hasCameraSupport=!1,!0===t.videostream&&t.disableCamera(),t.videostream=!1}))},captureImage:function(){var t=this.$refs.video,s=this.$refs.canvas;s.width=t.getBoundingClientRect().width,s.height=t.getBoundingClientRect().height;var e=s.getContext("2d");e.drawImage(t,0,0,s.width,s.height),this.imageCaptured=!0,this.videofileview=!1,this.videostream=!1,this.hasCameraSupport=!0,this.shop.shopPhoto=this.dataURItoBlob(s.toDataURL()),this.disableCamera(),console.log("tetete",this.shop.shopPhoto)},captureImageFallback:function(t){var s=this;this.shop.shopPhoto=t[0],this.shop.shopVideomp=t[0],this.shop.shopFiletype=t[0].type,this.shop.shopUserIds=this.userDetails.userId,console.log("tetete001",this.shop.shopPhoto);var e=this.$refs.canvas,o=e.getContext("2d"),a=new FileReader;"image/jpeg"===t[0].type?(a.onload=function(t){var a=new Image;a.onload=function(){e.width=a.width,e.height=a.height,o.drawImage(a,0,0),s.imageCaptured=!0,s.videofileview=!1,!0===s.videostream&&s.disableCamera(),s.videostream=!1},a.src=t.target.result},a.readAsDataURL(t[0]),console.log("tetete002",this.shop.shopPhoto)):"video/mp4"===t[0].type&&(a.readAsDataURL(t[0]),this.imageCaptured=!1,this.videofileview=!0,!0===this.videostream&&this.disableCamera(),this.videostream=!1)},disableCamera:function(){this.$refs.video.srcObject.getVideoTracks().forEach((function(t){t.stop()}))},dataURItoBlob:function(t){for(var s=atob(t.split(",")[1]),e=t.split(",")[0].split(":")[1].split(";")[0],o=new ArrayBuffer(s.length),a=new Uint8Array(o),i=0;i<s.length;i++)a[i]=s.charCodeAt(i);var n=new Blob([o],{type:e});return n},getLocation:function(){var t=this;this.locationLoading=!0,navigator.geolocation.getCurrentPosition((function(s){t.getCityAndCountry(s)}),(function(s){t.locationError()}),{timeout:7e3})},getCityAndCountry:function(t){var s=this,e="https://geocode.xyz/".concat(t.coords.latitude,",").concat(t.coords.longitude,"?json=1");this.$axios.get(e).then((function(t){s.locationSuccess(t)})).catch((function(t){s.locationError()}))},locationSuccess:function(t){this.shop.shopLocation=t.data.city,t.data.country&&(this.shop.shopLocation+=", ".concat(t.data.country)),this.locationLoading=!1},locationError:function(){this.$q.dialog({title:"Error",message:"Could not find your location"}),this.locationLoading=!1},sendShopsInfo:function(){console.log("0aaa",this.userClubs),this.firebaseSendShopInfo({shopsD:{id:this.shop.id,shopName:this.shop.shopName,shopUserIds:this.shop.shopUserIds,shopHashtags:this.shop.shopHashtags,shopHashtagsa:this.shop.shopHashtagsa,shopHashtagsb:this.shop.shopHashtagsb,shopCaption:this.shop.shopCaption,shopLocation:this.shop.shopLocation,shopPhoto:this.shop.imageUrl,shopFiletype:this.shop.shopFiletype,shopVideomp:this.shop.imageUrl,date:this.shop.date},companyId:this.userClubs.companyId,shopsId:this.shop.id}),console.log("0aaa",this.shop.id)},addPost:function(){var t=this;this.$q.loading.show();var s=new FormData;s.append("id",this.shop.id),s.append("shopName",this.shop.shopName),s.append("shopUserIds",this.shop.shopUserIds),s.append("shopHashtags",this.shop.shopHashtags),s.append("shopHashtagsa",this.shop.shopHashtagsa),s.append("shopHashtagsb",this.shop.shopHashtagsb),s.append("shopCaption",this.shop.shopCaption),s.append("shopLocation",this.shop.shopLocation),s.append("date",this.shop.date),s.append("shopFiletype",this.shop.shopFiletype),"image/jpeg"===this.shop.shopPhoto.type&&(s.append("file",this.shop.shopPhoto,this.shop.id+".png"),console.log(this.shop.shopFiletype),console.log("34234",this.shop.id),console.log("342qwqwq34",this.shop.shopPhoto)),"video/mp4"===this.shop.shopVideomp.type&&s.append("file",this.shop.shopVideomp,this.shop.id+".mp4"),console.log("uploaddatea12321312321",this.shop),this.$axios.post("".concat("http://localhost:3000","/createShops"),s).then((function(s){console.log("response: ",s),t.$q.notify({message:"Post created!",actions:[{label:"Dismiss",color:"white"}]}),t.getPosts(),t.$router.push("/shop"),t.$q.loading.hide()})).catch((function(s){console.log("err: ",s),t.$q.dialog({title:"Error",message:"Sorry, could not create post!"})}))},getPosts:function(){var t=this;this.loadingPosts=!0,this.$axios.get("".concat("http://localhost:3000","/shops")).then((function(s){console.log(s.data),Object.keys(s.data).forEach((function(e){console.log("key is",e),console.log("paramsId",t.shop.id),s.data[e].id===t.shop.id&&(console.log("0a",s.data[e].id),t.shop.imageUrl=s.data[e].imageUrl,console.log("0aa",s.data[e].imageUrl),console.log("0aaa",t.shop.imageUrl))})),t.sendShopsInfo(),t.loadingPosts=!1})).catch((function(s){t.$q.dialog({title:"Error",message:"Could not find your locationb"}),t.loadingPosts=!1}))}}),mounted:function(){void 0!==navigator.mediaDevices.getUserMedia?(console.log(navigator.mediaDevices.getUserMedia),this.hasCameraSupport=!0):(this.hasCameraSupport=!1,this.videostream=!1)},beforeDestroy:function(){this.hasCameraSupport&&(!0===this.videostream&&this.disableCamera(),this.videostream=!1)}},h=l,c=(e("6a4b"),e("2877")),d=e("9989"),m=e("66e5"),u=e("4074"),g=e("cb32"),f=e("58a81"),v=e("0170"),b=e("9c40"),q=e("0016"),C=e("2c91"),x=e("27f9"),y=e("7d53"),w=e("24e8"),S=e("f09f"),k=e("6b1d"),I=e("a370"),P=e("2eeb"),_=e("714f"),U=e("7f67"),H=e("eebe"),$=e.n(H),L=Object(c["a"])(h,o,a,!1,null,null,null);s["default"]=L.exports;$()(L,"components",{QPage:d["a"],QItem:m["a"],QItemSection:u["a"],QAvatar:g["a"],QBadge:f["a"],QItemLabel:v["a"],QBtn:b["a"],QIcon:q["a"],QSpace:C["a"],QInput:x["a"],QFile:y["a"],QDialog:w["a"],QCard:S["a"],QLinearProgress:k["a"],QCardSection:I["a"]}),$()(L,"directives",{GoBack:P["a"],Ripple:_["a"],ClosePopup:U["a"]})}}]);