<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>신한 퀴즈캐치AR</title>
    <script src='https://aframe.io/releases/0.9.2/aframe.min.js'></script>
    <script src="https://raw.githack.com/jeromeetienne/AR.js/master/aframe/build/aframe-ar.min.js"></script>
    <script src="https://raw.githack.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
	<script src="aframe-super-shooter-kit.min.js"></script>
    <script>
        THREEx.ArToolkitContext.baseURL = 'https://raw.githack.com/jeromeetienne/ar.js/master/three.js/'
    </script>
    <script src="./gyro-camera.js"></script>
    <script src="./gyro-entity-object.js"></script>
    <script src="./script.js"></script>
    <link rel="stylesheet" type="text/css" href="./style.css"/>
</head>

<script>
	AFRAME.registerComponent('monster1', {
        init: function () {
					this.random_x = ((Math.random() * 2) - 1)/100;
					this.random_y = ((Math.random() * 2) - 1)/100;
					console.log('move dir : ' + this.random_x + "," + this.random_y);
				},
      
        tick: function (time) {
					var move = this.el.object3D.rotation;
					move.x = move.x + this.random_x;
					move.y = move.y + this.random_y;
					this.el.object3D.rotation = move;
//					console.log('monster1 move : ' + move);
//					console.log('monster1 dir : ' + this.random_x + "," + this.random_y);
        }
	});
</script>



<body style='margin: 0; overflow: hidden;'>
    <div class="centered instructions"></div>
    <a-scene 
        vr-mode-ui='enabled: false' 
        embedded
        arjs='sourceType: webcam; sourceWidth:1280; sourceHeight:960; displayWidth: 1280; displayHeight: 960; debugUIEnabled: false;'>
			<a-assets>
				<audio id="background" src="./assets/sound/background.mp3" preload="auto"></audio>
		  	</a-assets>		

				<a-entity 
					id="bulletTemplate" 
					bullet 
					gltf-model="url(./assets/arrow.gltf)"
					scale="5.0 5.0 5.0"
				>
				</a-entity>
<!--
			  <a-entity class="target" target="healthPoints: 10" geometry="primitive: box" material="color: teal" position="0 0 -4" hit-handler></a-entity>
-->

				<!-- 회전축 -->
			  <a-entity id="firstmonster" position="0 0 0" monster1>
					<a-entity class="target" target="healthPoints: 2" gltf-model="url(./assets/solchar.gltf)" position="0 0 -4" scale="0.5 0.5 0.5" rotation="0 0 0" hit-handler animation-mixer="clip: fly; loop: repeat;"></a-entity>
				</a-entity>
			  <a-entity id="secondmonster" position="0 0 0" monster1>
					<a-entity class="target" target="healthPoints: 2" gltf-model="url(./assets/solchar.gltf)" position="0 0 -4" scale="0.5 0.5 0.5" rotation="0 0 0" hit-handler animation-mixer="clip: fly; loop: repeat;"></a-entity>
				</a-entity>
<!--
				<a-entity id="thirdmonster" position="0 0 0" monster1>
					<a-entity class="target" target="healthPoints: 2" gltf-model="url(./assets/solchar.gltf)" position="0 0 -4" scale="0.5 0.5 0.5" rotation="0 0 0" hit-handler animation-mixer="clip: fly; loop: repeat;"></a-entity>
				</a-entity>
				<a-entity id="forthmonster" position="0 0 0" monster1>
					<a-entity class="target" target="healthPoints: 2" gltf-model="url(./assets/solchar.gltf)" position="0 0 -4" scale="0.5 0.5 0.5" rotation="0 0 0" hit-handler animation-mixer="clip: fly; loop: repeat;"></a-entity>
				</a-entity>
				<a-entity id="fifthmonster" position="0 0 0" monster1>
					<a-entity class="target" target="healthPoints: 2" gltf-model="url(./assets/solchar.gltf)" position="0 0 -4" scale="0.5 0.5 0.5" rotation="0 0 0" hit-handler animation-mixer="clip: fly; loop: repeat;"></a-entity>
				</a-entity>
				<a-entity id="sixthmonster" position="0 0 0" monster1>
					<a-entity class="target" target="healthPoints: 2" gltf-model="url(./assets/solchar.gltf)" position="0 0 -4" scale="0.5 0.5 0.5" rotation="0 0 0" hit-handler animation-mixer="clip: fly; loop: repeat;"></a-entity>
				</a-entity>
-->				
<!--				
				<a-assets>
					<img id="shinhanlogoimg" src="./assets/first_start/solquiz_logo.png"/>    
					<img id="startgameimg" src="./assets/first_start/start_button.png"/>    
					<img id="gamehelpimg" src="./assets/first_start/help_button.png"/>    
					<img id="sollogoimg" src="./assets/first_start/start_sol.png"/>    
				 	<a-mixin
					id="shinhanlogo"
					geometry="primitive: plane; width: 1.31; height: 0.91"
					material="src: #shinhanlogoimg; shader: flat; transparent: true"
					position="0 3 -5.0"
					></a-mixin>			   
					<a-mixin
					id="sollogo"
					geometry="primitive: plane; width: 1.24; height: 1.64"
					material="src: #sollogoimg; shader: flat; transparent: true"
					position="0 2 -5.0"
					></a-mixin>			   
					<a-mixin
					id="startgame"
					geometry="primitive: plane; width: 1.2; height: 0.42"
					material="src: #startgameimg; shader: flat; transparent: true"
					position="0 0 -5.0"
					></a-mixin>			   
					<a-mixin
					id="gamehelp"
					geometry="primitive: plane; width: 1.22; height: 0.38"
					material="src: #gamehelpimg; shader: flat; transparent: true"
					position="0 -0.5 -5.0"
					></a-mixin>			   
				</a-assets>
-->				
			<a-camera id='camera1' look-controls-enabled='true' arjs-look-controls='smoothingFactor: 0.1' gyro-camera rotation-reader>
				<a-entity id="ui" position="0 0 0">
						<!-- Poster menu 
						<a-entity id="menu" highlight>
							<a-entity id="firstux" mixin="shinhanlogo" visible="true"></a-entity>
							<a-entity id="firstux3" mixin="sollogo" visible="true"></a-entity>
							<a-entity id="firstux1" mixin="startgame" visible="true"></a-entity>
							<a-entity id="firstux2" mixin="gamehelp" visible="true"></a-entity>
						</a-entity>
-->
					<a-entity text="value: version 0.1.2.1" position="0 1.0 -2.1"></a-entity>
					<a-entity 
						id="gun" 
						shooter 
						gltf-model="url(./assets/bow.gltf)" 
						scale="4.0 4.0 4.0" 
						animation-mixer="clip: shoot; loop: repeat;" 
						click-to-shoot 
						position="0 -0.6 -1">
					</a-entity>			  
				</a-entity>
				<a-entity sound="src: #background"></a-entity>
			</a-camera>
</a-scene>
<!--
	<div id="titlescene" class="centered">
    <button data-action="change"></button>
	</div>
-->	
	<div id="titlescene" class="titlebackground">
		<!-- 첫번째 UX 화면 --> 
		<div id="firstux" style="display: none;">
			<img style="position:absolute; display: flex; width:100%; height:100%; top: 0; left: 0;" src="./assets/first_start/background.png"/>

			<div id="startgamebutton" style="position:absolute; display: flex; width:105px; height:39; top: 500px; left: 30%;">
				<img src="./assets/first_start/start_button.png"/>    
			</div>
			<div id="helpbutton" style="position:absolute; display: flex; width:101px; height:37; top: 600px; left: 30%;">
				<img src="./assets/first_start/help_button.png"/>    
			</div>
		</div>
		<!-- 도움말 UX 화면 --> 
		<div id="helpux" style="display: none;">
			<img style="position:absolute; display: flex; width:100%; height:100%; top: 0; left: 0;" src="./assets/second_game/help_back.png"/>

			<div id="helpokbutton" style="position:absolute; display: flex; width:105px; height:39; top: 500px; left: 30%;">
				<img src="./assets/third_qa/ok_button.png"/>    
			</div>
		</div>
		<!-- 게임 UX 화면 --> 
		<div id="gameux" style="display: none;">
			<img style="position:absolute; display: flex; width:100%; height:20%; top: 0; left: 0;" src="./assets/second_game/topbar_back.png"/>
			<img style="position:absolute; display: flex; width:84px; height:84px; top: 50%; left: 50%;" src="./assets/second_game/crosshair.png"/>

	    <button data-action="change"></button>

			<div id="shootbutton" style="position:absolute; display: flex; width:105px; height:39; top: 80%; left: 30%;">
				<img src="./assets/third_qa/ok_button.png"/>    
			</div>
		</div>
		<!-- 퀴즈 UX 화면 --> 
		<div id="quizux" style="display: none;">
			<img style="position:absolute; display: flex; width:100%; height:50%; top: 30%; left: 0;" src="./assets/third_qa/quiz_back.png"/>

			<p style="position:absolute; display: flex; width:90%; height:50%; top: 32%; left: 20px;">안녕하세요? 이것은 퀴즈입니까?</p>

			<div id="obutton" style="position:absolute; display: flex; width:117px; height:45; top: 90%; left: 10%;">
				<img src="./assets/third_qa/O_button.png"/>    
			</div>
			<div id="xbutton" style="position:absolute; display: flex; width:117px; height:45; top: 90%; right: 10%;">
				<img src="./assets/third_qa/X_button.png"/>    
			</div>
		</div>

	</div>


</body>