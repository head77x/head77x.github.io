<!DOCTYPE html>
<html>

<head>
	<meta charset='utf-8'>
	<meta http-equiv='X-UA-Compatible' content='IE=edge'>
	<title>신한 퀴즈캐치AR</title>
	<script src='https://aframe.io/releases/1.2.0/aframe.min.js'></script>

	<script src="https://raw.githack.com/jeromeetienne/AR.js/master/aframe/build/aframe-ar.min.js"></script>
	<script src="https://raw.githack.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
	<script src="aframe-super-shooter-kit.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script src="./qrcode.min.js"></script>
	<script>
			THREEx.ArToolkitContext.baseURL = 'https://raw.githack.com/jeromeetienne/ar.js/master/three.js/'
	</script>
	<script src="./gyro-camera.js"></script>
	<script src="./gyro-entity-object.js"></script>
	<script src="./script.js"></script>
	<link rel="stylesheet" type="text/css" href="./style.css"/>
</head>

<body style='margin: 0; overflow: hidden;'>
    <!--<div class="centered instructions"></div>-->
    <a-scene 
        vr-mode-ui='enabled: false' 
        embedded
        arjs='sourceType: webcam; sourceWidth:1280; sourceHeight:960; displayWidth: 1280; displayHeight: 960; debugUIEnabled: false;'>
			<a-assets>
				<audio id="background" src="./assets/sound/background.mp3" preload="auto"></audio>
				<audio id="miss" src="./assets/sound/miss.mp3" preload="auto"></audio>
				<audio id="shoot1" src="./assets/sound/shoot1.mp3" preload="auto"></audio>
				<audio id="shoot2" src="./assets/sound/shoot2.mp3" preload="auto"></audio>
				<audio id="timeclick" src="./assets/sound/timeclick.mp3" preload="auto"></audio>
				<audio id="startsound" src="./assets/sound/startsound.mp3" preload="auto"></audio>
				<audio id="wrong" src="./assets/sound/wrong.mp3" preload="auto"></audio>
				<audio id="correct" src="./assets/sound/correct.mp3" preload="auto"></audio>
				<audio id="countdown" src="./assets/sound/countdown.mp3" preload="auto"></audio>
				<audio id="hitted" src="./assets/sound/hitted.mp3" preload="auto"></audio>
		  	</a-assets>		

				<a-entity 
					id="bulletTemplate" 
					bullet 
					gltf-model="url(./assets/arrow.gltf)"
					scale="5.0 5.0 5.0"
				>
				</a-entity>
<!--
			  <a-entity class="target" target="healthPoints: 10" geometry="primitive: box" material="color: teal" position="0 0 -4" hit-handler></a-entity>
-->

				<!-- 회전축 -->
			  <a-entity id="solmodel" position="0 0 0" visible="false">
					<a-entity class="target" 
						target="healthPoints: 2" 
						gltf-model="url(./assets/chr/sol_v03.gltf)" 
						position="0 0 -5" 
						scale="0.5 0.5 0.5" 
						rotation="0 0 0" 
						brandon-hit 
						animation-mixer="clip: solani; loop: repeat; duration: 10"></a-entity>
				</a-entity>
			  <a-entity id="molymodel" position="0 0 0" visible="false">
					<a-entity class="target" 
						target="healthPoints: 2" 
						gltf-model="url(./assets/chr/moli_v01.gltf)" 
						position="0 0 -6" 
						scale="0.5 0.5 0.5" 
						rotation="0 0 0" 
						brandon-hit 
						animation-mixer="clip: moli.001; loop: repeat; duration: 10;"></a-entity>
				</a-entity>
				<a-entity id="rinomodel" position="0 0 0" visible="false">
					<a-entity class="target" 
						target="healthPoints: 2" 
						gltf-model="url(./assets/chr/rino_v01.gltf)" 
						position="0 0 -6" 
						scale="0.5 0.5 0.5" 
						rotation="0 0 0" 
						brandon-hit 
						animation-mixer="clip: rino.001; loop: repeat; duration: 10;"></a-entity>
				</a-entity>
				<a-entity id="suemodel" position="0 0 0" visible="false">
					<a-entity class="target" 
						target="healthPoints: 2" 
						gltf-model="url(./assets/chr/shoo_v01.gltf)" 
						position="0 0 -6" 
						scale="0.5 0.5 0.5" 
						rotation="0 0 0" 
						brandon-hit 
						animation-mixer="clip: shoo.001; loop: repeat; duration: 10;"></a-entity>
				</a-entity>
				<a-entity id="lulamodel" position="0 0 0" visible="false">
					<a-entity class="target" 
						target="healthPoints: 2" 
						gltf-model="url(./assets/chr/Lululala_v02.gltf)" 
						position="0 0 -6" 
						scale="0.5 0.5 0.5" 
						rotation="0 0 0" 
						brandon-hit 
						animation-mixer="clip: lulu.001; loop: repeat; duration: 10;"></a-entity>
				</a-entity>
				<a-entity id="doremodel" position="0 0 0" visible="false">
					<a-entity class="target" 
						target="healthPoints: 2" 
						gltf-model="url(./assets/chr/doremi_v01.gltf)" 
						position="0 0 -6" 
						scale="0.5 0.5 0.5" 
						rotation="0 0 0" 
						brandon-hit 
						animation-mixer="clip: doremi.001; loop: repeat; duration: 10;"></a-entity>
				</a-entity>
<!--				
				<a-assets>
					<img id="shinhanlogoimg" src="./assets/first_start/solquiz_logo.png"/>    
					<img id="startgameimg" src="./assets/first_start/start_button.png"/>    
					<img id="gamehelpimg" src="./assets/first_start/help_button.png"/>    
					<img id="sollogoimg" src="./assets/first_start/start_sol.png"/>    
				 	<a-mixin
					id="shinhanlogo"
					geometry="primitive: plane; width: 1.31; height: 0.91"
					material="src: #shinhanlogoimg; shader: flat; transparent: true"
					position="0 3 -5.0"
					></a-mixin>			   
					<a-mixin
					id="sollogo"
					geometry="primitive: plane; width: 1.24; height: 1.64"
					material="src: #sollogoimg; shader: flat; transparent: true"
					position="0 2 -5.0"
					></a-mixin>			   
					<a-mixin
					id="startgame"
					geometry="primitive: plane; width: 1.2; height: 0.42"
					material="src: #startgameimg; shader: flat; transparent: true"
					position="0 0 -5.0"
					></a-mixin>			   
					<a-mixin
					id="gamehelp"
					geometry="primitive: plane; width: 1.22; height: 0.38"
					material="src: #gamehelpimg; shader: flat; transparent: true"
					position="0 -0.5 -5.0"
					></a-mixin>			   
				</a-assets>
-->				
			<a-camera id='camera1' look-controls-enabled='true' arjs-look-controls='smoothingFactor: 0.1' gyro-camera rotation-reader>
				<a-entity id="ui" position="0 0 0">
						<!-- Poster menu 
						<a-entity id="menu" highlight>
							<a-entity id="firstux" mixin="shinhanlogo" visible="true"></a-entity>
							<a-entity id="firstux3" mixin="sollogo" visible="true"></a-entity>
							<a-entity id="firstux1" mixin="startgame" visible="true"></a-entity>
							<a-entity id="firstux2" mixin="gamehelp" visible="true"></a-entity>
						</a-entity>
-->
					<a-entity text="value: version 0.4.3.8" position="0 1.0 -2.1"></a-entity>
				</a-entity>
				<a-entity 
					id="gun" 
					shooter 
					gltf-model="url(./assets/bow_anim.gltf)" 
					scale="4.0 4.0 4.0" 
					animation-mixer="clip: bowshot.001; loop: repeat; duration: 3.5;" 
					brandon-shoot
					visible="false"
					position="0 -0.6 -1">
				</a-entity>			  
				<a-entity id="solstart" position="0 0 0" visible="false">
					<a-entity class="target" target="healthPoints: 2" gltf-model="url(./assets/chr/sol_v03.gltf)" position="0 0 -5" scale="0.5 0.5 0.5" rotation="0 0 0" animation-mixer="clip: solani; loop: repeat; duration: 10;"></a-entity>
				</a-entity>
				  <a-entity id="molystart" position="0 0 0" visible="false">
					<a-entity class="target" target="healthPoints: 2" gltf-model="url(./assets/chr/moli_v01.gltf)" position="0 0 -6" scale="0.5 0.5 0.5" rotation="0 0 0" animation-mixer="clip: moli.001; loop: repeat; duration: 10;"></a-entity>
				</a-entity>
				<a-entity id="rinostart" position="0 0 0" visible="false">
					<a-entity class="target" target="healthPoints: 2" gltf-model="url(./assets/chr/rino_v01.gltf)" position="0 0 -6" scale="0.5 0.5 0.5" rotation="0 0 0" animation-mixer="clip: rino.001; loop: repeat; duration: 10;"></a-entity>
				</a-entity>
				<a-entity id="suestart" position="0 0 0" visible="false">
					<a-entity class="target" target="healthPoints: 2" gltf-model="url(./assets/chr/shoo_v01.gltf)" position="0 0 -6" scale="0.5 0.5 0.5" rotation="0 0 0" animation-mixer="clip: shoo.001; loop: repeat; duration: 10;"></a-entity>
				</a-entity>
				<a-entity id="lulastart" position="0 0 0" visible="false">
					<a-entity class="target" target="healthPoints: 2" gltf-model="url(./assets/chr/Lululala_v02.gltf)" position="0 0 -6" scale="0.5 0.5 0.5" rotation="0 0 0" animation-mixer="clip: lulu.001; loop: repeat; duration: 10;"></a-entity>
				</a-entity>
				<a-entity id="dorestart" position="0 0 0" visible="false">
					<a-entity class="target" target="healthPoints: 2" gltf-model="url(./assets/chr/doremi_v01.gltf)" position="0 0 -6" scale="0.5 0.5 0.5" rotation="0 0 0" animation-mixer="clip: doremi.001; loop: repeat; duration: 10;"></a-entity>
				</a-entity>

				<a-sound id="bgm" sound="src: #background" loop="true"></a-sound>
				<a-sound id="misssound" sound="src: #miss"></a-sound>
				<a-sound id="countdownsound" sound="src: #countdown"></a-sound>
				<a-sound id="startbell" sound="src: #startsound"></a-sound>
				<a-sound id="hitheart" sound="src: #hitted"></a-sound>
				<a-sound id="ticktock" sound="src: #timeclick" loop="true"></a-sound>
				<a-sound id="correctsound" sound="src: #correct"></a-sound>
				<a-sound id="wrongsound" sound="src: #wrong"></a-sound>
			</a-camera>
</a-scene>
<!--
	<div id="titlescene" class="centered">
    <button data-action="change"></button>
	</div>
-->	
	<div id="titlescene">
		<!-- 첫번째 UX 화면 --> 
		<div id="firstux" style="display: none;">
			<img style="position:absolute; display: flex; height:100vh; width:100vw; top: 0; left:0;" src="./assets/first_start/intro_bg.png"/>
			<img style="position:absolute; display: flex; width:66vw; left: 17vw; top: 10vh;" src="./assets/first_start/solquiz_logo.png"/>    
			<img style="position:absolute; display: flex; width:70vw; left: 15vw; top: 30vh;" src="./assets/first_start/start_sol.png"/>    
			<img style="position:absolute; display: flex; width:90vw; left: 5vw; bottom: 0;" src="./assets/first_start/intro_img.png"/>    

			<div id="startgamebutton" >
				<img style="position:absolute; display: flex; width: 60vw; left: 20vw; top: 62vh;" src="./assets/first_start/start_button.png"/>    
			</div>
			<div id="helpbutton" >
				<img style="position:absolute; display: flex; width: 66vw; left: 17vw; top: 70vh; " src="./assets/first_start/help_button.png"/>    
			</div>
		</div>
		<!-- 도움말 UX 화면 --> 
		<div id="helpux" style="display: none;">
			<img style="position:absolute; display: flex; height:100vh; width:100vw; top: 0; left:0;" src="./assets/first_start/intro_bg.png"/>
			<img style="position:absolute; display: flex; width:90vw; top: 3vh; left: 5vw;" src="./assets/second_game/help_back.png"/>

			<div id="helpokbutton">
				<img style="position:absolute; display: flex; width: 20vw; left: 40vw; bottom: 10vh; " src="./assets/third_qa/ok_button2.png"/>    
			</div>
		</div>

		<!-- 카운트다운 화면 -->
		<div id="countdowntext" style="display: none;">
			<img id="count1" style="position:absolute; display: flex; width:40vw; left:30vw; top:40vh; display: none;" src="./assets/first_start/1.png"/>
			<img id="count2" style="position:absolute; display: flex; width:40vw; left:30vw; top:40vh; display: none;" src="./assets/first_start/2.png"/>
			<img id="count3" style="position:absolute; display: flex; width:40vw; left:30vw; top:40vh; display: none;" src="./assets/first_start/3.png"/>
			<img id="count4" style="position:absolute; display: flex; width:80vw; left:10vw; top:30vh; display: none;" src="./assets/first_start/catch.png"/>
		</div>

		<!-- 게임 UX 화면 --> 
		<div id="gameux" style="display: none;">
			<img style="position:absolute; display: flex; width: 100vw; left:0; top: 0;" src="./assets/second_game/topbar_back.png"/>
			<div id="whathomebutton">
				<img style="position:absolute; display: flex; width:10vw; left: 0; top: 20vw;" src="./assets/second_game/home_button_on.png"/>
			</div>
			<div id="helpbutton">
				<img style="position:absolute; display: flex; width:10vw; right: 0; top: 20vw;" src="./assets/second_game/help2_button_on.png"/>
			</div>
			<div id="sol_icon">
				<img style="position:absolute; display: flex; width: 13vw; left: 3vw; top: 3vw;" src="./assets/second_game/sol_icon.png"/>
			</div>
			<div id="moli_icon">
				<img style="position:absolute; display: flex; width: 13vw; left: 19.2vw; top: 3vw;" src="./assets/second_game/moli_icon.png"/>
			</div>
			<div id="rino_icon">
				<img style="position:absolute; display: flex; width: 13vw; left: 35.4vw; top: 3vw;" src="./assets/second_game/rino_icon.png"/>
			</div>
			<div id="sue_icon">
				<img style="position:absolute; display: flex; width: 13vw; left: 51.6vw; top: 3vw;" src="./assets/second_game/sue_icon.png"/>
			</div>
			<div id="doremi_icon">
				<img style="position:absolute; display: flex; width: 13vw; left: 67.8vw; top: 3vw;" src="./assets/second_game/doremi_icon.png"/>
			</div>
			<div id="ruru_icon">
				<img style="position:absolute; display: flex; width: 13vw; left: 84vw; top: 3vw;" src="./assets/second_game/ruru_icon.png"/>
			</div>
			<img style="position:absolute; display: flex; width:84px; height:84px; top: calc(50vh - 42px); left: calc(50vw - 42px);" src="./assets/second_game/crosshair.png"/>
<!--			<img style="position:absolute; display: flex; width:84px; height:84px; top: calc(50vh - 42px); left: calc(50vw - 42px);" src="./assets/butterfly-flying.gif"/> -->
		</div>
		<!-- 홈으로 가기 확인 UX 화면 --> 
		<div id="confirmhome" style="display: none;">
			<div style="position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; opacity: 0.5; background-color: rgb(0, 0, 0);"></div>
			<img style="position:absolute; display: flex; width:90vw; top: 50vh; left: 5vw;" src="./assets/second_game/tohome_box.png"/>
			<div id="tohomeok">
				<img style="position:absolute; display: flex; width: 20vw; left: 20vw; top: 75vh; " src="./assets/forth_finish/ok_button_on.png"/>    
			</div>
			<div id="tohomecancel">
				<img style="position:absolute; display: flex; width: 20vw; left: 60vw; top: 75vh; " src="./assets/forth_finish/cancel_button_on.png"/>    
			</div>
		</div>


		<!-- 퀴즈 UX 화면 --> 
		<div id="quizux" style="display: none;">
			<div style="position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; opacity: 0.5; background-color: rgb(0, 0, 0);"></div>
			<img style="position:absolute; display: flex; width:100vw; height:50%; top: 30%; left: 0;" src="./assets/third_qa/quiz_back.png"/>

			<p id="quiztext" style="position:absolute; display: flex; text-align:center; align-items: center; width:70vw; top: 33.8vh; left: 14vw; font-size: x-large; font-weight: bold; color:white;"> </p>

			<div id="obutton" >
				<img style="position:absolute; display: flex; width:30vw; bottom: 8vh; left: 10vw;" src="./assets/third_qa/O_button.png"/>    
			</div>
			<div id="xbutton" >
				<img style="position:absolute; display: flex; width:30vw; bottom: 8vh; left: 60vw;" src="./assets/third_qa/X_button.png"/>    
			</div>
		</div>

		<!-- 퀴즈 맞은 UX 화면 --> 
		<div id="quizcorrect" style="display: none;">
			<div style="position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; opacity: 0.5; background-color: rgb(0, 0, 0);"></div>
			<img style="position:absolute; display: flex; width:100vw; height:50%; top: 30%; left: 0;" src="./assets/third_qa/quiz_back.png"/>

			<p id="resulttext" style="position:absolute; display: flex; text-align:center; align-items: center; width:70vw; top: 33.8vh; left: 14vw; font-size: x-large; font-weight: bold; color:white;"> </p>

			<div id="oknext" >
				<img style="position:absolute; display: flex; width:40vw; bottom: 8vh; left: 30vw;" src="./assets/third_qa/ok_button2.png"/>    
			</div>
		</div>

		<!-- 퀴즈 틀린 UX 화면 --> 
		<div id="quizincorrect" style="display: none;">
			<div style="position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; opacity: 0.5; background-color: rgb(0, 0, 0);"></div>
			<img style="position:absolute; display: flex; width:100vw; height:50%; top: 30%; left: 0;" src="./assets/third_qa/quiz_back.png"/>

			<p id="wrongtext" style="position:absolute; display: flex; text-align:center; align-items: center; width:70vw; top: 33.8vh; left: 14vw; font-size: x-large; font-weight: bold; color:white;">
				틀렸습니다<br><br>다시 한 번 잘 생각해봐주세요.
			</p>

			<div id="okbefore" >
				<img style="position:absolute; display: flex; width:40vw; bottom: 8vh; left: 30vw;" src="./assets/third_qa/retry_button.png"/>    
			</div>
		</div>

		<!-- 축하 UX 화면 --> 
		<div id="congratux" style="display: none;">
			<div style="position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; opacity: 0.5; background-color: rgb(0, 0, 0);"></div>
			<img style="position:absolute; display: flex; width:100vw; top: 10vh; left: 0;" src="./assets/forth_finish/finish_back_img.png"/>
			<img style="position:absolute; display: flex; width:100vw; top: 40vh; left: 0;" src="./assets/forth_finish/finish_back.png"/>

			<div id="gotoqr" >
				<img style="position:absolute; display: flex; width:40vw; bottom: 25vh; left: 30vw;" src="./assets/forth_finish/check_button_on.png"/>    
			</div>
		</div>

		<!-- 최종 QR 화면 --> 
		<div id="qrux" style="display: none;">
			<img style="position:absolute; display: flex; height:100vh; width:100vw; top: 0; left:0;" src="./assets/first_start/intro_bg.png"/>
			<img style="position:absolute; display: flex; width:90vw; top: 3vh; left: 5vw;" src="./assets/forth_finish/qr_back.png"/>

			<div class="qrcode" id="qrcode"></div>

			<div id="restarthome" >
				<img style="position:absolute; display: flex; width:40vw; bottom: 30vh; left: 30vw;" src="./assets/forth_finish/check_button_on.png"/>    
			</div>
		</div>
		
	</div>


</body>